<style>
   /* ================= RESET ================= */
.vp-header,
.vp-header * {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
  font-family: "Segoe UI", system-ui, sans-serif;
}

/* ================= HEADER CONTAINER ================= */
.vp-header {
  width: 100%;
}

/* ================= TOP HEADER (FULL STICKY) ================= */
.vp-header-top {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  z-index: 9999;
  background: linear-gradient(135deg, #0e7490);
}
body {
  padding-top: 65px; /* adjust if header height changes */
}

/* INNER */
.vp-header-top-wrap {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0.8rem 2rem;
  display: flex;
  align-items: center;
  gap: 1rem;
}

/* LOGO */
.vp-logo {
  font-size: 1.7rem;
  font-weight: 800;
  color: #ffffff;
  text-decoration: none;
  white-space: nowrap;
}

.vp-logo span {
  color: #ecfeff;
}

/* SEARCH */
.vp-search {
  flex: 1;
}

.vp-search input {
  width: 100%;
  padding: 0.6rem 1.1rem;
  border-radius: 999px;
  border: none;
  outline: none;
  font-size: 0.9rem;
}

/* AUTH */
.vp-auth {
  display: flex;
  gap: 0.6rem;
}

.vp-auth a {
  padding: 0.45rem 0.9rem;
  border-radius: 999px;
  font-size: 0.8rem;
  font-weight: 600;
  text-decoration: none;
  white-space: nowrap;
}

.vp-login {
  color: #ffffff;
  border: 1px solid rgba(255,255,255,0.6);
}

.vp-signup {
  background: #ffffff;
  color: #06b6d4;
}

/* ICONS */
.vp-header-icons {
  display: flex;
  gap: 0.6rem;
}

.vp-icon-btn {
  width: 38px;
  height: 38px;
  border-radius: 999px;
  background: rgba(255,255,255,0.18);
  display: flex;
  align-items: center;
  justify-content: center;
}

.vp-icon-btn svg {
  width: 18px;
  height: 18px;
  stroke: #ffffff;
}

/* ================= CATEGORY BAR (NORMAL SCROLL) ================= */
.vp-header-bottom {
  background: #ecfeff;
  border-bottom: 1px solid #67e8f9;
}

.vp-header-bottom-wrap {
  max-width: 1600px;
  margin: 0 auto;
  padding: 0.7rem 2rem;
  display: flex;
  gap: 1.4rem;
  overflow-x: auto;
  scrollbar-width: none;
}

.vp-header-bottom-wrap::-webkit-scrollbar {
  display: none;
}

.vp-header-bottom a {
  text-decoration: none;
  font-size: 0.88rem;
  font-weight: 600;
  color: #0e7490;
  white-space: nowrap;
}


@media (max-width: 750px) {

  .vp-header-top-wrap {
    flex-wrap: wrap;
    row-gap: 0.6rem;
  }
  body {
  padding-top: 110px; /* adjust if header height changes */
}
  .vp-logo {
    order: 1;
  }

  .vp-auth {
    order: 2;
  }

  .vp-header-icons {
    order: 3;
    margin-left: auto;
  }

  .vp-search {
    order: 10;
    width: 100%;
    flex: 0 0 100%;
  }
}

/* ================= EXTRA SMALL DEVICES ‚â§450px ================= */
@media (max-width: 450px) {

  .vp-header-top-wrap {
    flex-wrap: wrap;
    row-gap: 0.6rem;
  }

  /* LOGO FIRST */
  .vp-logo {
    order: 1;
    font-size: 1.4rem;
  }

  /* LOGIN / SIGNUP SECOND */
  .vp-auth {
    order: 2;
  }

  .vp-auth a {
    padding: 0.35rem 0.6rem;
    font-size: 0.72rem;
  }

  /* ICONS THIRD (RIGHT SIDE) */
  .vp-header-icons {
    order: 3;
    margin-left: auto;
  }

  .vp-icon-btn {
    width: 34px;
    height: 34px;
  }

  /* SEARCH ALWAYS LAST (NEW ROW) */
  .vp-search {
    order: 10;
    width: 100%;
    flex: 0 0 100%;
    margin-top: 0.6rem;
  }

  /* ADJUST BODY OFFSET FOR 2-ROW HEADER */
  body {
    padding-top: 115px;
  }
}
/* ================= ULTRA SMALL DEVICES (380px ‚Äì 300px) ================= */
@media (max-width: 380px) {

  .vp-header-top-wrap {
    flex-wrap: wrap;
    row-gap: 0.5rem;
    padding: 0.6rem 1rem;
  }

  /* LOGO */
  .vp-logo {
    order: 1;
    font-size: 1.3rem;
  }

  /* HIDE LOGIN / SIGNUP */
  

  /* ICONS NEXT TO LOGO */
  .vp-header-icons {
    order: 2;
    margin-left: auto;
    gap: 0.4rem;
  }

  .vp-icon-btn {
    width: 32px;
    height: 32px;
  }

  .vp-icon-btn svg {
    width: 16px;
    height: 16px;
  }

  /* SEARCH FULL WIDTH BELOW */
  .vp-search {
    order: 10;
    width: 100%;
    flex: 0 0 100%;
    margin-top: 0.5rem;
  }

  .vp-search input {
    font-size: 0.85rem;
    padding: 0.55rem 0.9rem;
  }

  /* BODY OFFSET FOR FIXED HEADER */
  body {
    padding-top: 105px;
  }
}
/* ================= CATEGORY ITEM (NO BACKGROUND) ================= */

.category-item {
  flex: 0 0 auto;
}

/* Link layout */
.category-link {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0;              /* no padding box */
  background: transparent; /* ‚ùå no background */
  border: none;            /* ‚ùå no border */
  text-decoration: none;
  white-space: nowrap;
}

/* Hover ‚Äì subtle only (no background) */
.category-link:hover .category-name {
  color: #0891b2;
}

/* Round Image */
.category-image {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  object-fit: cover;
  border: 2px solid #0e7490;  /* optional soft outline */
  flex-shrink: 0;
}

/* Placeholder (no image) */
.category-placeholder {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: #e2e8f0;   /* neutral only for placeholder */
  color: #0e7490;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 0.9rem;
  flex-shrink: 0;
}

/* Text */
.category-name {
  font-size: 0.85rem;
  font-weight: 600;
  color: #0e7490;
}

/* Header bottom spacing */
.vp-header-bottom-wrap {
  display: flex;
  align-items: center;
  gap: 1.1rem;
}
/* ================= USER AVATAR ================= */
.vp-user-menu {
  position: relative;
}

.vp-user-avatar {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  background: linear-gradient(135deg, #ff2c84,rgb(255, 111, 135));
  color: #ffffff;
  font-weight: 700;
  font-size: 0.95rem;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  user-select: none;
}

/* ================= DROPDOWN ================= */
.vp-user-dropdown {
  position: absolute;
  top: 46px;
  right: 0;
  background: #ffffff;
  border-radius: 12px;
  min-width: 150px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  overflow: hidden;
  opacity: 0;
  visibility: hidden;
  transform: translateY(-5px);
  transition: all 0.25s ease;
  z-index: 9999;
}

.vp-user-dropdown a {
  display: block;
  padding: 10px 14px;
  font-size: 0.85rem;
  font-weight: 600;
  color: #0e7490;
  text-decoration: none;
  border-bottom: 1px solid #daf9ff;
}

.vp-user-dropdown a:hover {
  background: #ecfeff;
}

/* ================= HOVER ACTION ================= */
.vp-user-menu:hover .vp-user-dropdown {
  opacity: 1;
  visibility: visible;
  transform: translateY(0);
}



</style>

<header class="vp-header">

  <!-- ================= STICKY HEADER ================= -->
  <div class="vp-header-top">
    <div class="vp-header-top-wrap">

      <a href="/" class="vp-logo"><span>Pickup</span></a>

      <div class="vp-search">
        <input type="text" placeholder="Search groceries, stores, items..." />
      </div>

      <!-- LOGIN / SIGNUP -->
     <div class="vp-auth">
{% if not request.user.is_authenticated %}
  <a href="{% url 'login' %}" class="vp-login">
    <i class="fa-solid fa-right-to-bracket"></i> Login/Signup
  </a>
{% endif %}

{% if request.user.is_authenticated %}
  <a href="{% url 'dashboard' %}" class="vp-login">Dashboard</a>
{% endif %}
</div>


      <!-- ICONS -->
    <!-- ICONS (ONLY WHEN LOGGED IN) -->
{% if request.user.is_authenticated %}
  <div class="vp-header-icons">

    <!-- Cart -->
    <a href="#" class="vp-icon-btn" title="Cart">
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
        <circle cx="9" cy="21" r="1"/>
        <circle cx="20" cy="21" r="1"/>
        <path d="M1 1h4l2.7 13.4a2 2 0 0 0 2 1.6h9.7a2 2 0 0 0 2-1.6L23 6H6"/>
      </svg>
    </a>

    <!-- Wishlist -->
    <a href="#" class="vp-icon-btn" title="Wishlist">
      <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
        <path d="M20.8 4.6a5.5 5.5 0 0 0-7.8 0L12 5.6l-1-1a5.5 5.5 0 0 0-7.8 7.8l1 1L12 21l7.8-7.8 1-1a5.5 5.5 0 0 0 0-7.8z"/>
      </svg>
    </a>

    <!-- Dashboard -->
 
    <!-- Profile -->
   <!-- USER AVATAR DROPDOWN -->
<div class="vp-user-menu">
  <div class="vp-user-avatar">
    {{ request.user.email|slice:":1"|upper }}
  </div>

  <div class="vp-user-dropdown">
  <a href="{% url 'profile' %}">
    <i class="fa-solid fa-user"></i>
    <span>Profile</span>
  </a>

  <a href="{% url 'logout' %}">
    <i class="fa-solid fa-right-from-bracket"></i>
    <span>Logout</span>
  </a>
</div>

</div>


  </div>
{% endif %}


    </div>
  </div>

 <div class="vp-header-bottom">
  <div class="vp-header-bottom-wrap">

    {% if request.user.is_authenticated %}
  <div style="color:white;font-size:0.8rem;cursor:pointer"
       onclick="window.location.href='{% url 'profile' %}'">
    üìç
    {% if selected_address %}
      {{ selected_address.city }}, {{ selected_address.state }}
    {% else %}
      Select Location
    {% endif %}
  </div>
{% endif %}

    
    {% for cat in header_categories %}
      <div class="category-item">
        {% if request.user.is_authenticated and header_store %}
          <a href="{% url 'category_products' header_store.id cat.slug %}" class="category-link">
            {% if cat.image %}
              <img src="{{ cat.image.url }}" 
                   alt="{{ cat.name }}"
                   class="category-image"
                   width="50"
                   height="50">
            {% else %}
              <div class="category-placeholder">
                {{ cat.name|slice:":1"|upper }}
              </div>
            {% endif %}
            <span class="category-name">{{ cat.name }}</span>
          </a>
        {% else %}
          {% if request.user.is_authenticated %}
            <div class="category-link">
              {% if cat.image %}
                <img src="{{ cat.image.url }}" 
                     alt="{{ cat.name }}"
                     class="category-image"
                     width="50"
                     height="50">
              {% else %}
                <div class="category-placeholder">
                  {{ cat.name|slice:":1"|upper }}
                </div>
              {% endif %}
              <span>{{ cat.name }}</span>
            </div>
          {% else %}
            <a href="{% url 'login' %}?next={{ request.path }}" class="category-link">
              {% if cat.image %}
                <img src="{{ cat.image.url }}" 
                     alt="{{ cat.name }}"
                     class="category-image"
                     width="50"
                     height="50">
              {% else %}
                <div class="category-placeholder">
                  {{ cat.name|slice:":1"|upper }}
                </div>
              {% endif %}
              <span>{{ cat.name }}</span>
            </a>
          {% endif %}
        {% endif %}
      </div>
    {% empty %}
      <span style="opacity:0.6;">No categories available</span>
    {% endfor %}

  </div>
</div>

  </div>
<link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
  integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
  crossorigin="anonymous"
  referrerpolicy="no-referrer"
/>

</header>
